<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>原型对象 | 吃惊夜夜</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="favicon.ico">
    <meta name="description" content="吃惊夜夜的小港湾">
    
    <link rel="preload" href="/assets/css/0.styles.9825735b.css" as="style"><link rel="preload" href="/assets/js/app.c4086290.js" as="script"><link rel="preload" href="/assets/js/2.2defd20b.js" as="script"><link rel="preload" href="/assets/js/61.40cd948a.js" as="script"><link rel="prefetch" href="/assets/js/10.8eebcbe5.js"><link rel="prefetch" href="/assets/js/11.e4d5d580.js"><link rel="prefetch" href="/assets/js/12.84d7b649.js"><link rel="prefetch" href="/assets/js/13.8ca97571.js"><link rel="prefetch" href="/assets/js/14.3c626919.js"><link rel="prefetch" href="/assets/js/15.1f35bfee.js"><link rel="prefetch" href="/assets/js/16.0e469adb.js"><link rel="prefetch" href="/assets/js/17.491efd1f.js"><link rel="prefetch" href="/assets/js/18.39eb943a.js"><link rel="prefetch" href="/assets/js/19.36fc650b.js"><link rel="prefetch" href="/assets/js/20.6f167d3b.js"><link rel="prefetch" href="/assets/js/21.a301ec28.js"><link rel="prefetch" href="/assets/js/22.d5fa3bea.js"><link rel="prefetch" href="/assets/js/23.78544147.js"><link rel="prefetch" href="/assets/js/24.318455c7.js"><link rel="prefetch" href="/assets/js/25.1254b648.js"><link rel="prefetch" href="/assets/js/26.c9759a22.js"><link rel="prefetch" href="/assets/js/27.ba0323c7.js"><link rel="prefetch" href="/assets/js/28.85d5ddc5.js"><link rel="prefetch" href="/assets/js/29.c28730b9.js"><link rel="prefetch" href="/assets/js/3.e1f57491.js"><link rel="prefetch" href="/assets/js/30.69e1fc08.js"><link rel="prefetch" href="/assets/js/31.c09e243f.js"><link rel="prefetch" href="/assets/js/32.d4e07804.js"><link rel="prefetch" href="/assets/js/33.76ab3d09.js"><link rel="prefetch" href="/assets/js/34.2ad4e756.js"><link rel="prefetch" href="/assets/js/35.24a5a2bb.js"><link rel="prefetch" href="/assets/js/36.4b92c73f.js"><link rel="prefetch" href="/assets/js/37.dc88bc6c.js"><link rel="prefetch" href="/assets/js/38.b217e74d.js"><link rel="prefetch" href="/assets/js/39.b988ca7d.js"><link rel="prefetch" href="/assets/js/4.26f73e91.js"><link rel="prefetch" href="/assets/js/40.4c0db7a4.js"><link rel="prefetch" href="/assets/js/41.ef5ee8cc.js"><link rel="prefetch" href="/assets/js/42.408c3886.js"><link rel="prefetch" href="/assets/js/43.4b5d4c62.js"><link rel="prefetch" href="/assets/js/44.2df9f6c6.js"><link rel="prefetch" href="/assets/js/45.6dce77a2.js"><link rel="prefetch" href="/assets/js/46.28e3d709.js"><link rel="prefetch" href="/assets/js/47.af83327e.js"><link rel="prefetch" href="/assets/js/48.c9c0fc61.js"><link rel="prefetch" href="/assets/js/49.f7ef8fc9.js"><link rel="prefetch" href="/assets/js/5.5dcec586.js"><link rel="prefetch" href="/assets/js/50.97752fef.js"><link rel="prefetch" href="/assets/js/51.1b9db6ce.js"><link rel="prefetch" href="/assets/js/52.a59ef98b.js"><link rel="prefetch" href="/assets/js/53.09ab1597.js"><link rel="prefetch" href="/assets/js/54.00eef295.js"><link rel="prefetch" href="/assets/js/55.0b8b6e82.js"><link rel="prefetch" href="/assets/js/56.05bff832.js"><link rel="prefetch" href="/assets/js/57.7f919fc7.js"><link rel="prefetch" href="/assets/js/58.e47ba765.js"><link rel="prefetch" href="/assets/js/59.f9c7c829.js"><link rel="prefetch" href="/assets/js/6.f2a96706.js"><link rel="prefetch" href="/assets/js/60.b4dab731.js"><link rel="prefetch" href="/assets/js/62.373deb93.js"><link rel="prefetch" href="/assets/js/63.730ad74d.js"><link rel="prefetch" href="/assets/js/64.3fdaadf6.js"><link rel="prefetch" href="/assets/js/65.8038e113.js"><link rel="prefetch" href="/assets/js/66.19d75172.js"><link rel="prefetch" href="/assets/js/67.9bce3722.js"><link rel="prefetch" href="/assets/js/68.e5053f7b.js"><link rel="prefetch" href="/assets/js/69.f81c663c.js"><link rel="prefetch" href="/assets/js/7.cafa4535.js"><link rel="prefetch" href="/assets/js/70.1808d9cb.js"><link rel="prefetch" href="/assets/js/71.afdd038b.js"><link rel="prefetch" href="/assets/js/72.fc9f8798.js"><link rel="prefetch" href="/assets/js/73.9456b4f3.js"><link rel="prefetch" href="/assets/js/74.9c68730a.js"><link rel="prefetch" href="/assets/js/75.62bd11e4.js"><link rel="prefetch" href="/assets/js/76.1dbfdb6a.js"><link rel="prefetch" href="/assets/js/77.7c2c5aac.js"><link rel="prefetch" href="/assets/js/78.f6267da3.js"><link rel="prefetch" href="/assets/js/79.2d1c0f08.js"><link rel="prefetch" href="/assets/js/8.0fd24d01.js"><link rel="prefetch" href="/assets/js/80.f0ee681b.js"><link rel="prefetch" href="/assets/js/9.c10878f4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9825735b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">吃惊夜夜</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端技术" class="dropdown-title"><span class="title">前端技术</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端技术" class="mobile-dropdown-title"><span class="title">前端技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link router-link-active">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/language/es6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/language/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/markdown/" class="nav-link">
  Markdown语法
</a></li></ul></div></div><div class="nav-item"><a href="/javascript/" class="nav-link router-link-active">
  JavaScript
</a></div><div class="nav-item"><a href="/language/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="https://github.com/chijingyeye" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端技术" class="dropdown-title"><span class="title">前端技术</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端技术" class="mobile-dropdown-title"><span class="title">前端技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link router-link-active">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/language/es6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/language/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/markdown/" class="nav-link">
  Markdown语法
</a></li></ul></div></div><div class="nav-item"><a href="/javascript/" class="nav-link router-link-active">
  JavaScript
</a></div><div class="nav-item"><a href="/language/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="https://github.com/chijingyeye" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javascript/" aria-current="page" class="sidebar-link">01-JavaScript简介</a></li><li><a href="/javascript/02-helloWorld.html" class="sidebar-link">02-开始写JavaScript：hello world</a></li><li><a href="/javascript/03-javascript.html" class="sidebar-link">03-常量和变量</a></li><li><a href="/javascript/04-javascript.html" class="sidebar-link">04-标识符、关键字、保留字</a></li><li><a href="/javascript/05-javascript.html" class="sidebar-link">05-变量的数据类型：基本数据类型和引用数据类型</a></li><li><a href="/javascript/06-javascript.html" class="sidebar-link">06-基本数据类型：String 和 Boolean</a></li><li><a href="/javascript/07-javascript.html" class="sidebar-link">07-基本数据类型：Number</a></li><li><a href="/javascript/08-javascript.html" class="sidebar-link">08-基本数据类型：Null 和 Undefined</a></li><li><a href="/javascript/09-javascript.html" class="sidebar-link">09-数据类型转换</a></li><li><a href="/javascript/10-javascript.html" class="sidebar-link">10-运算符</a></li><li><a href="/javascript/11-javascript.html" class="sidebar-link">11-流程控制语句：选择结构（if和switch）</a></li><li><a href="/javascript/12-javascript.html" class="sidebar-link">12-流程控制语句：循环结构（for和while）</a></li><li><a href="/javascript/13-javascript.html" class="sidebar-link">13-对象简介</a></li><li><a href="/javascript/14-javascript.html" class="sidebar-link">14-基本包装类型</a></li><li><a href="/javascript/15-javascript.html" class="sidebar-link">15-内置对象 String：字符串的常见方法</a></li><li><a href="/javascript/16-javascript.html" class="sidebar-link">16-内置对象：Number和Math</a></li><li><a href="/javascript/17-javascript.html" class="sidebar-link">17-内置对象：Date</a></li><li><a href="/javascript/18-javascript.html" class="sidebar-link">18-数组简介</a></li><li><a href="/javascript/19-javascript.html" class="sidebar-link">19-数组的常见方法</a></li><li><a href="/javascript/20-javascript.html" class="sidebar-link">20-函数</a></li><li><a href="/javascript/21-javascript.html" class="sidebar-link">21-作用域和变量提升</a></li><li><a href="/javascript/22-javascript.html" class="sidebar-link">22-预编译</a></li><li><a href="/javascript/23-javascript.html" class="sidebar-link">23-this指向</a></li><li><a href="/javascript/24-javascript.html" class="sidebar-link">24-call、apply 和 bind</a></li><li><a href="/javascript/25-javascript.html" class="sidebar-link">25-高阶函数</a></li><li><a href="/javascript/26-javascript.html" class="sidebar-link">26-闭包</a></li><li><a href="/javascript/27-javascript.html" class="sidebar-link">27-面向对象概述</a></li><li><a href="/javascript/28-javascript.html" class="sidebar-link">28-对象的创建&amp;构造函数</a></li><li><a href="/javascript/29-javascript.html" class="sidebar-link">29-对象的基本操作</a></li><li><a href="/javascript/30-javascript.html" class="sidebar-link">30-浅拷贝和深拷贝</a></li><li><a href="/javascript/31_1-javascript.html" class="sidebar-link">31_1-对象的高级操作（待更新）</a></li><li><a href="/javascript/31_2-javascript.html" class="sidebar-link">31_2-原型链和原型继承（待更新）</a></li><li><a href="/javascript/31_3-javascript.html" class="sidebar-link">31_3-类和构造继承（待更新）</a></li><li><a href="/javascript/32-javascript.html" class="sidebar-link">32-正则表达式</a></li><li><a href="/javascript/33-javascript.html" class="sidebar-link">33-事件简介</a></li><li><a href="/javascript/34-javascript.html" class="sidebar-link">34-DOM简介和DOM操作</a></li><li><a href="/javascript/35-javascript.html" class="sidebar-link">35-通过style对象获取和设置行内样式</a></li><li><a href="/javascript/36-javascript.html" class="sidebar-link">36-offset相关属性和匀速动画（含轮播图的实现）</a></li><li><a href="/javascript/37-javascript.html" class="sidebar-link">37-scroll相关属性和缓动动画</a></li><li><a href="/javascript/38-javascript.html" class="sidebar-link">38-client（可视区）相关属性</a></li><li><a href="/javascript/39-javascript.html" class="sidebar-link">39-事件的绑定和事件对象Event</a></li><li><a href="/javascript/40-javascript.html" class="sidebar-link">40-事件的传播和事件冒泡</a></li><li><a href="/javascript/41-javascript.html" class="sidebar-link">41-事件委托</a></li><li><a href="/javascript/42-javascript.html" class="sidebar-link">42-键盘事件</a></li><li><a href="/javascript/43-javascript.html" class="sidebar-link">43-BOM简介和navigator.userAgent&amp;History&amp;Location</a></li><li><a href="/javascript/44-javascript.html" class="sidebar-link">44-定时器</a></li><li><a href="/javascript/45-javascript.html" class="sidebar-link">45-jQuery的介绍和选择器</a></li><li><a href="/javascript/46-javascript.html" class="sidebar-link">46-jQuery动画详解</a></li><li><a href="/javascript/47-javascript.html" class="sidebar-link">47-jQuery操作DOM</a></li><li><a href="/javascript/48-javascript.html" class="sidebar-link">48-jQuery的事件机制和其他知识</a></li><li><a href="/javascript/49-javascript.html" class="sidebar-link">49-Zepto入门</a></li><li><a href="/javascript/50-javascript.html" class="sidebar-link">BOM的常见内置方法和内置对象</a></li><li><a href="/javascript/51-javascript.html" class="sidebar-link">常见代码解读</a></li><li><a href="/javascript/52-javascript.html" aria-current="page" class="active sidebar-link">原型对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javascript/52-javascript.html#原型对象" class="sidebar-link">原型对象</a></li><li class="sidebar-sub-header"><a href="/javascript/52-javascript.html#对象的-tostring-方法" class="sidebar-link">对象的 toString() 方法</a></li><li class="sidebar-sub-header"><a href="/javascript/52-javascript.html#js-的垃圾回收-gc-机制" class="sidebar-link">JS 的垃圾回收（GC）机制</a></li><li class="sidebar-sub-header"><a href="/javascript/52-javascript.html#我的公众号" class="sidebar-link">我的公众号</a></li></ul></li><li><a href="/javascript/53-javascript.html" class="sidebar-link">原型链</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><blockquote><p>在看本文之前，我们可以先复习上一篇文章：《03-JavaScript 基础/12-对象的创建&amp;构造函数.md》</p></blockquote> <h2 id="原型对象"><a href="#原型对象" class="header-anchor">#</a> 原型对象</h2> <h3 id="原型的引入"><a href="#原型的引入" class="header-anchor">#</a> 原型的引入</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> gender<span class="token punctuation">;</span>
  <span class="token comment">//向对象中添加一个方法</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我是&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//创建一个Person的实例</span>
<span class="token keyword">var</span> per <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;孙悟空&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> per2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;猪八戒&quot;</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
per<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
per2<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>per<span class="token punctuation">.</span>sayName <span class="token operator">==</span> per2<span class="token punctuation">.</span>sayName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//打印结果为false</span>
</code></pre></div><p><strong>分析如下</strong>：</p> <p>上方代码中，我们的 sayName 方法是写在构造函数 Person 内部的，然后在两个实例中进行了调用。造成的结果是，<strong>构造函数每执行一次，就会给每个实例创建一个新的 sayName 方法</strong>。也就是说，每个实例的 sayName 都是唯一的。因此，最后一行代码的打印结果为 false。</p> <p>按照上面这种写法，假设创建 10000 个对象实例，就会创建 10000 个 sayName 方法。这种写法肯定是不合适的。我们为何不让所有的对象共享同一个方法呢？</p> <p>还有一种方式是，将 sayName 方法在全局作用域中定义：（不建议。原因看注释）</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> gender<span class="token punctuation">;</span>
  <span class="token comment">//向对象中添加一个方法</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>sayName <span class="token operator">=</span> fun<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//将sayName方法在全局作用域中定义</span>
<span class="token comment">/*
 * 将函数定义在全局作用域，污染了全局作用域的命名空间
 *  而且定义在全局作用域中也很不安全
 */</span>
<span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;Hello大家好，我是:&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>比较好的方式是，在原型中添加 sayName 方法：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;Hello大家好，我是:&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>这也就引入了我们本文要讲的「原型」。</p> <h3 id="原型-prototype-的概念"><a href="#原型-prototype-的概念" class="header-anchor">#</a> 原型 prototype 的概念</h3> <p><strong>认识 1</strong>：</p> <p>我们所创建的每一个函数，解析器都会向函数中添加一个属性 prototype。这个属性对应着一个对象，这个对象就是我们所谓的原型对象。</p> <p>如果函数作为普通函数调用 prototype 没有任何作用，当函数以构造函数的形式调用时，它所创建的实例对象中都会有一个隐含的属性，指向该构造函数的原型，我们可以通过<strong>proto</strong>来访问该属性。</p> <p>代码举例：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 定义构造函数</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">var</span> per1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> per2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打印结果：[object object]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>per1<span class="token punctuation">.</span>__proto__ <span class="token operator">==</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打印结果：true</span>
</code></pre></div><p>上方代码的最后一行：打印结果表明，<code>实例.__proto__</code> 和 <code>构造函数.prototype</code>都指的是原型对象。</p> <p><strong>认识 2</strong>：</p> <p>原型对象就相当于一个公共的区域，所有同一个类的实例都可以访问到这个原型对象，我们可以将对象中共有的内容，统一设置到原型对象中。</p> <p>以后我们创建构造函数时，可以将这些对象共有的属性和方法，统一添加到构造函数的原型对象中，这样就不用分别为每一个对象添加，也不会影响到全局作用域，就可以使每个对象都具有这些属性和方法了。</p> <p><strong>认识 3</strong>：</p> <p>使用 <code>in</code> 检查对象中是否含有某个属性时，如果对象中没有但是<strong>原型中</strong>有，也会返回 true。</p> <p>可以使用对象的<code>hasOwnProperty()</code>来检查<strong>对象自身中</strong>是否含有该属性。</p> <h3 id="原型链"><a href="#原型链" class="header-anchor">#</a> 原型链</h3> <p>原型对象也是对象，所以它也有原型，当我们使用或访问一个对象的属性或方法时：</p> <ul><li><p>它会先在对象自身中寻找，如果有则直接使用；</p></li> <li><p>如果没有则会去原型对象中寻找，如果找到则直接使用；</p></li> <li><p>如果没有则去原型的原型中寻找，直到找到 Object 对象的原型。</p></li> <li><p>Object 对象的原型没有原型，如果在 Object 原型中依然没有找到，则返回 null</p></li></ul> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <p>第一次接触「原型」和「原型链」的时候，会比较难理解。多接触几次，再回过头来看，就慢慢熟悉了。</p> <h2 id="对象的-tostring-方法"><a href="#对象的-tostring-方法" class="header-anchor">#</a> 对象的 toString() 方法</h2> <p>我们先来看下面这段代码：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> gender<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> per1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;vae&quot;</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;per1 = &quot;</span> <span class="token operator">+</span> per1<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;per1 = &quot;</span> <span class="token operator">+</span> per1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>打印结果：</p> <div class="language- extra-class"><pre class="language-text"><code>per1 = [object Object]
per1 = [object Object]
</code></pre></div><p>上面的代码中，我们尝试打印实例 per1 的内部信息，但是发现，无论是打印 <code>per1</code> 还是打印 <code>per1.toString()</code>，结果都是<code>object</code>，这是为啥呢？分析如下：</p> <ul><li><p>当我们直接在页面中打印一个对象时，其实是输出了对象的 toString()方法的返回值。</p></li> <li><p>如果我们希望在打印对象时，不输出[object Object]，可以手动为对象添加一个 toString()方法。意思是，重写 toString() 方法。</p></li></ul> <p>重写 toString() 方法，具体做法如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> gender<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//方式一：重写 Person 原型的toString方法。针对 Person 的所有实例生效</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;Person[name=&quot;</span> <span class="token operator">+</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span>
    <span class="token string">&quot;,age=&quot;</span> <span class="token operator">+</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">+</span>
    <span class="token string">&quot;,gender=&quot;</span> <span class="token operator">+</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">+</span>
    <span class="token string">&quot;]&quot;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 方式二：仅重写实例 per1 的 toString方法。但是这种写法，只对 per1 生效， 对 per2 无效</span>
<span class="token comment">/*
	per1.toString = function() {
		return (
		  &quot;Person[name=&quot; +
		  this.name +
		  &quot;,age=&quot; +
		  this.age +
		  &quot;,gender=&quot; +
		  this.gender +
		  &quot;]&quot;
		);
	};
	*/</span>

<span class="token keyword">var</span> per1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;smyh&quot;</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> per2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;vae&quot;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;per1 = &quot;</span> <span class="token operator">+</span> per1<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;per2 = &quot;</span> <span class="token operator">+</span> per2<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>打印结果：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>per1 <span class="token operator">=</span> Person<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">(</span>name <span class="token operator">=</span> smyh<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>age <span class="token operator">=</span> <span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>gender <span class="token operator">=</span> 男<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
per2 <span class="token operator">=</span> Person<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">(</span>name <span class="token operator">=</span> vae<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>age <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>gender <span class="token operator">=</span> 男<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>代码分析：</p> <p>上面的代码中，仔细看注释。我们重写了 Person 原型的 toString()，这样的话，可以保证对 Person 的所有实例生效。</p> <p>从这个例子，我们可以看出 <code>prototype</code> 的作用。</p> <h2 id="js-的垃圾回收-gc-机制"><a href="#js-的垃圾回收-gc-机制" class="header-anchor">#</a> JS 的垃圾回收（GC）机制</h2> <p>程序运行过程中会产生垃圾，这些垃圾积攒过多以后，会导致程序运行的速度过慢。所以我们需要一个垃圾回收的机制，来处理程序运行过程中产生垃圾。</p> <p>当一个对象没有任何的变量或属性对它进行引用时，此时我们将永远无法操作该对象，此时这种对象就是一个垃圾，这种对象过多会占用大量的内存空间，导致程序运行变慢，所以这种垃圾必须进行清理。</p> <p>上面这句话，也可以这样理解：如果堆内存中的对象，没有任何变量指向它时，这个堆内存里的对象就会成为垃圾。</p> <p>JS 拥有自动的垃圾回收机制，会自动将这些垃圾对象从内存中销毁。我们不需要也不能进行垃圾回收的操作。我们仅仅需要做的是：如果你不再使用该对象，那么，将改对象的引用设置为 null 即可。</p> <h2 id="我的公众号"><a href="#我的公众号" class="header-anchor">#</a> 我的公众号</h2> <p>想学习<font color="#0000ff"><strong>更多技能</strong></font>？不妨关注我的微信公众号：<strong>千古壹号</strong>（id：<code>qianguyihao</code>）。</p> <p>扫一扫，你将发现另一个全新的世界，而这将是一场美丽的意外：</p> <p><img src="http://img.smyhvae.com/2016040102.jpg" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/javascript/51-javascript.html" class="prev">
        常见代码解读
      </a></span> <span class="next"><a href="/javascript/53-javascript.html">
        原型链
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.c4086290.js" defer></script><script src="/assets/js/2.2defd20b.js" defer></script><script src="/assets/js/61.40cd948a.js" defer></script>
  </body>
</html>
